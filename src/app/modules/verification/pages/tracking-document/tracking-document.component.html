<div class="p-4 contenedor">
  <div class="flex flex-row overflow-hidden items-center rounded h-12 flex-grow">
    <input
      class="text-outline-gray-3 px-4 w-full h-12 focus:outline-none focus:ring-0 focus:ring-transparent focus:border-transparent bg-container-gray-1"
      placeholder="Buscar por id de documento" type="search" (keydown.enter)="searchTracking()"
      (keypress)="onlyNumbers($event)" [(ngModel)]="documentId">

    <div class="icon flex items-center justify-center p-3 bg-container-orange-2 text-white cursor-pointer" (click)="searchTracking()">
      Consultar
    </div>
  </div>
</div>

<div class="flex flex-1 flex-col overflow-hidden theme-light dark:theme-dark contenedor">
  <div *ngIf="false"
       class="bg-container-gray-2 p-4 flex flex-col space-y-1 border-b border-container-gray-2 rounded-t-lg">
    <span class="t-h5 text-outline-gray-3">Trazabilidad</span>
  </div>

  <div *ngIf="false" class="bg-container-gray-2 p-4 flex flex-col space-y-1 border-b border-mono-30">
    <span class="t-body-2 text-outline-gray-3">
      <ol>
        <li>{{traceability.length}} registros de trazabilidad</li>
        <li
          *ngIf="traceability.length > 0">Último registro: {{traceability[traceability.length - 1].created_at | date: 'medium':'UTC'}}</li>
      </ol>
    </span>
  </div>

  <perfect-scrollbar *ngIf="traceability.length" style="height:100%" class="pt-4">
    <div
      class="w-full h-full p-4 flex flex-col justify-start border border-container-gray-1 bg-container-gray-1 rounded">
      <div *ngFor="let tracking of trackingValue; let position = index">
        <div *ngIf="!tracking.active" class="hover:bg-container-gray-2 item"
             (click)="activeTracking(position)">
          <div class="flex flex-row items-center">
            <div class="w-full flex flex-row flex-1 space-x-2">
              <div class="rounded-full w-12 flex justify-center items-center bg-container-gray-2">
                <div class="icon text-white">
                  <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                       viewBox="0 0 20 20" fill="none">
                    <path
                      d="M15.3129 19.6004C12.9491 19.6004 11.0254 17.6766 11.0254 15.3129V10.6254C11.0254 10.501 11.126 10.4004 11.2504 10.4004H19.3754C19.4998 10.4004 19.6004 10.501 19.6004 10.6254V15.3129C19.6004 17.6766 17.6766 19.6004 15.3129 19.6004ZM11.4754 10.8504V15.3129C11.4754 17.4291 13.1966 19.1504 15.3129 19.1504C17.4291 19.1504 19.1504 17.4291 19.1504 15.3129V10.8504H11.4754ZM10.0004 19.6004H0.625391C0.501016 19.6004 0.400391 19.4998 0.400391 19.3754V0.625391C0.400391 0.501016 0.501016 0.400391 0.625391 0.400391H11.8754C11.9354 0.400391 11.9929 0.424141 12.0348 0.466016L15.7848 4.21602C15.8266 4.25852 15.8504 4.31539 15.8504 4.37539V8.75039H15.4004V4.60039H11.8754C11.751 4.60039 11.6504 4.49977 11.6504 4.37539V0.850391H0.850391V19.1504H10.0004V19.6004ZM12.1004 4.15039H15.0823L12.1004 1.16852V4.15039ZM9.37539 17.1004H3.12539V16.6504H9.37539V17.1004ZM9.37539 14.6004H3.12539V14.1504H9.37539V14.6004ZM9.37539 12.1004H3.12539V11.6504H9.37539V12.1004ZM3.12539 9.60039V9.15039H9.37539V9.60039H3.12539ZM13.1254 7.10039H3.12539V6.65039H13.1254V7.10039Z"/>
                  </svg>
                </div>
              </div>
              <div class="flex items-center flex-1">
                <div class="flex-1">
                  <div class="flex flex-1 flex-col">
                    <span class="t-subtitle-1 text-outline-gray-3 capitalize">Id: {{tracking.id}}</span>
                    <span class="t-caption-2 text-outline-gray-3">By user id: {{tracking.id_user}}</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="flex flex-col items-end pr-4">
              <div title="Presiona para ver Detalles" class="w-6 h-6 flex justify-center items-center text-blue-600">
                <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"
                     fill="none">
                  <path
                    d="M8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM8.74905 5.50003C8.74905 5.91371 8.41369 6.24907 8.00001 6.24907C7.58633 6.24907 7.25098 5.91371 7.25098 5.50003C7.25098 5.08635 7.58633 4.751 8.00001 4.751C8.41369 4.751 8.74905 5.08635 8.74905 5.50003ZM8 7C8.27614 7 8.5 7.22386 8.5 7.5V10.5C8.5 10.7761 8.27614 11 8 11C7.72386 11 7.5 10.7761 7.5 10.5V7.5C7.5 7.22386 7.72386 7 8 7Z"/>
                </svg>
              </div>
              <span
                class="text-outline-gray-3 t-caption-2 break-all text-right">{{tracking.created_at | date: 'medium':'UTC'}}</span>
            </div>
          </div>
          <div class="hidden t-body-2">
            <div>
              <span class="text-mono-70 t-caption-2">Id</span>
              <span>{{tracking.id}}</span>
            </div>
            <div>
              <span class="text-mono-70 t-caption-2">Document Id</span>
              <span>{{tracking.document_id}}</span>
            </div>
            <div>
              <span class="text-mono-70 t-caption-2">Queue Id</span>
              <span>{{tracking.queue_id}}</span>
            </div>
            <div class="col-span-2">
              <span class="text-mono-70 t-caption-2 capitalize">Transaction Id</span>
              <span>{{tracking.transaction_id}}</span>
            </div>
            <div class="col-span-2">
              <span class="text-mono-70 t-caption-2 capitalize">User Id</span>
              <span>{{tracking.id_user}}</span>
            </div>
            <div class="col-span-2">
              <span class="text-mono-70 t-caption-2 capitalize">Url Lion</span>
              <span>{{tracking.url_lion}}</span>
            </div>
            <div class="col-span-2">
              <span class="text-mono-70 t-caption-2 capitalize">Descripción</span>
              <span>{{tracking.created_at}}</span>
            </div>
            <div class="col-span-2">
              <span class="text-mono-70 t-caption-2 capitalize">Descripción</span>
              <span>{{tracking.updated_at}}</span>
            </div>
          </div>
        </div>
        <div *ngIf="tracking.active"
             class="overflow-hidden border rounded bg-mono-10 hover:bg-container-gray-2 hover:cursor-pointer hover:rounded"
             (click)="closeTracking(position)">
          <div class="flex flex-row items-center">
            <div class="w-full flex flex-row flex-1 space-x-2">
              <div class="rounded-br-full w-12 flex justify-center items-center bg-container-orange-3 text-white">
                <div class="icon">
                  <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                       viewBox="0 0 20 20" fill="none">
                    <path
                      d="M15.3129 19.6004C12.9491 19.6004 11.0254 17.6766 11.0254 15.3129V10.6254C11.0254 10.501 11.126 10.4004 11.2504 10.4004H19.3754C19.4998 10.4004 19.6004 10.501 19.6004 10.6254V15.3129C19.6004 17.6766 17.6766 19.6004 15.3129 19.6004ZM11.4754 10.8504V15.3129C11.4754 17.4291 13.1966 19.1504 15.3129 19.1504C17.4291 19.1504 19.1504 17.4291 19.1504 15.3129V10.8504H11.4754ZM10.0004 19.6004H0.625391C0.501016 19.6004 0.400391 19.4998 0.400391 19.3754V0.625391C0.400391 0.501016 0.501016 0.400391 0.625391 0.400391H11.8754C11.9354 0.400391 11.9929 0.424141 12.0348 0.466016L15.7848 4.21602C15.8266 4.25852 15.8504 4.31539 15.8504 4.37539V8.75039H15.4004V4.60039H11.8754C11.751 4.60039 11.6504 4.49977 11.6504 4.37539V0.850391H0.850391V19.1504H10.0004V19.6004ZM12.1004 4.15039H15.0823L12.1004 1.16852V4.15039ZM9.37539 17.1004H3.12539V16.6504H9.37539V17.1004ZM9.37539 14.6004H3.12539V14.1504H9.37539V14.6004ZM9.37539 12.1004H3.12539V11.6504H9.37539V12.1004ZM3.12539 9.60039V9.15039H9.37539V9.60039H3.12539ZM13.1254 7.10039H3.12539V6.65039H13.1254V7.10039Z"/>
                  </svg>
                </div>
              </div>
              <div class="flex items-center flex-1">
                <div class="flex-1">
                  <div class="flex flex-1 flex-col">
                    <span class="t-subtitle-1 text-outline-gray-3 capitalize">Id: {{tracking.id}}</span>
                    <span class="t-caption-2 text-outline-gray-3">By user id: {{tracking.id_user}}</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="flex flex-col items-end pr-4">
              <div title="Presiona para cerrar los detalles"
                   class="icon w-6 h-6 flex justify-center items-center text-blue-600">
                <svg class="fill-current text-alert-info" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                     viewBox="0 0 16 16" fill="none">
                  <path
                    d="M8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM8.74905 5.50003C8.74905 5.91371 8.41369 6.24907 8.00001 6.24907C7.58633 6.24907 7.25098 5.91371 7.25098 5.50003C7.25098 5.08635 7.58633 4.751 8.00001 4.751C8.41369 4.751 8.74905 5.08635 8.74905 5.50003ZM8 7C8.27614 7 8.5 7.22386 8.5 7.5V10.5C8.5 10.7761 8.27614 11 8 11C7.72386 11 7.5 10.7761 7.5 10.5V7.5C7.5 7.22386 7.72386 7 8 7Z"/>
                </svg>
              </div>
              <span
                class="text-outline-gray-3 t-caption-2 break-all text-right">{{tracking.created_at | date: 'medium':'UTC'}}</span>
            </div>
          </div>
          <div class="px-4 py-2 grid grid-cols-2 gap-2 break-all text-black t-body-2">
            <div class="flex flex-col">
              <span class="text-outline-orange-1 t-caption-2">Document ID</span>
              <span class="text-outline-gray-3">{{tracking.document_id}}</span>
            </div>
            <div class="flex flex-col">
              <span class="text-outline-orange-1 t-caption-2 capitalize">Transaction ID</span>
              <a href="{{urlBjungle+tracking.transaction_id}}" target="_blank" class="text-outline-gray-3">{{tracking.transaction_id}}</a>
            </div>
            <div class="flex flex-col">
              <span class="text-outline-orange-1 t-caption-2">User ID</span>
              <span class="text-outline-gray-3">{{tracking.id_user}}</span>
            </div>
            <div class="flex flex-col">
              <span class="text-outline-orange-1 t-caption-2">Event</span>
              <span class="text-outline-gray-3">{{tracking.event}}</span>
            </div>
          </div>
        </div>
        <div *ngIf="position !== trackingValue.length -1" class="border-r border-mono-30 w-6 h-6"></div>
      </div>
    </div>
  </perfect-scrollbar>

  <div *ngIf="false" class="pagination p-4 border-t bg-container-gray-2">
    <div class="flex flex-row justify-between space-x-4 items-center">
      <div class="flex flex-row relative group cursor-pointer pl-2 items-center border-input w-20 bg-mono-10 rounded">
        <span class="text-outline-gray-3 w-full truncate">{{paginationValue}}</span>
        <div class="p-3 flex items-center justify-center text-outline-gray-3">
          <svg class="fill-current text-outline-gray-3" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
               viewBox="0 0 16 16">
            <path
              d="M2.81319 5.64645C3.00846 5.45118 3.32504 5.45118 3.5203 5.64645L8.00008 10.1262L12.4799 5.64645C12.6751 5.45118 12.9917 5.45118 13.187 5.64645C13.3822 5.84171 13.3822 6.15829 13.187 6.35355L8.35363 11.1869C8.15837 11.3821 7.84179 11.3821 7.64653 11.1869L2.81319 6.35355C2.61793 6.15829 2.61793 5.84171 2.81319 5.64645Z"/>
          </svg>
        </div>
        <div class="border rounded absolute bottom-10 left-0 w-full hidden group-hover:block">
          <div class="option-combo" (click)="paginationValue = 5; changePaginationValue()">5</div>
          <div class="option-combo" (click)="paginationValue = 10; changePaginationValue()">10</div>
          <div class="option-combo" (click)="paginationValue = 15; changePaginationValue()">15</div>
          <div class="option-combo" (click)="paginationValue = 20; changePaginationValue()">20</div>
        </div>
        <ec-dropdown [dropStyle]="phoneStyle" [icon]="false" [(ngModel)]="paginationNumberCurrency"
                     [data]="optionPagination" optionLabel="value" [filter]="true" placeholder="+00"
                     [showClear]="false"></ec-dropdown>
      </div>

      <div class="flex flex-row space-x-1 text-outline-gray-3">
        <button class="border-input flex flex-row items-center justify-center w-10 h-10 hover:bg-container-gray-3"
                (click)="beforePage()" [disabled]="paginationIndex === 1">
          <div class="transform rotate-90">
            <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
              <path
                d="M2.81319 5.64645C3.00846 5.45118 3.32504 5.45118 3.5203 5.64645L8.00008 10.1262L12.4799 5.64645C12.6751 5.45118 12.9917 5.45118 13.187 5.64645C13.3822 5.84171 13.3822 6.15829 13.187 6.35355L8.35363 11.1869C8.15837 11.3821 7.84179 11.3821 7.64653 11.1869L2.81319 6.35355C2.61793 6.15829 2.61793 5.84171 2.81319 5.64645Z"/>
            </svg>
          </div>
        </button>
        <div class="border-input cursor-default flex flex-row items-center justify-center h-10 bg-mono-10 px-2">
          <span>{{paginationIndex}}/{{lengthTracking}}</span>
        </div>
        <button class="border-input flex flex-row items-center justify-center w-10 h-10 hover:bg-container-gray-3"
                (click)="nextPage()" [disabled]="paginationIndex === lengthTracking">
          <div class="transform -rotate-90">
            <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
              <path
                d="M2.81319 5.64645C3.00846 5.45118 3.32504 5.45118 3.5203 5.64645L8.00008 10.1262L12.4799 5.64645C12.6751 5.45118 12.9917 5.45118 13.187 5.64645C13.3822 5.84171 13.3822 6.15829 13.187 6.35355L8.35363 11.1869C8.15837 11.3821 7.84179 11.3821 7.64653 11.1869L2.81319 6.35355C2.61793 6.15829 2.61793 5.84171 2.81319 5.64645Z"/>
            </svg>
          </div>
        </button>
      </div>
    </div>
  </div>
</div>

<!--<app-block-page [show]="isLoading"></app-block-page>-->

<app-toast></app-toast>
