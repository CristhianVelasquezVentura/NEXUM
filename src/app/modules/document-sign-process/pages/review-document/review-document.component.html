<div class="flex w-full space-x-4 h-screen flex-row justify-center bg-zc-50 lg:px-8">
  <div class="flex h-screen w-full flex-col" style="max-width: 1200px;">
    <div class="header h-fit w-full p-8 lg:px-0">
      <app-header-document-sign [title]="'Proceso de Firma'"></app-header-document-sign>
    </div>
    <div class="flex lg:space-x-6 w-full" style="height: calc(100vh - 100px)">
      <div class="hidden lg:block w-60">
        <app-steper [steper]="['f','d','d']"></app-steper>
      </div>
      <div class="body rounded-t-lg relative flex-1 flex flex-col p-8 space-y-4 bg-white" style="height: calc(100vh - 100px)">
        <div class="h-fit space-y-2">
          <app-steper class="lg:hidden" [steper]="['f','d','d']"></app-steper>
          <div>
            <div class="flex w-full h-fit space-x-2" style="max-width: 320px">
              <button (click)="selectMainOrAnnexe('document')" class="flex-1 {{typeDoc === 'document' ? 'b-tab-on':'b-tab-off'}}">Documento principal</button>
              <button (click)="selectMainOrAnnexe('annexes')" class="flex-1 {{typeDoc === 'annexes' ? 'b-tab-on':'b-tab-off'}}">Anexos</button>
            </div>
          </div>
          <div>
            <span *ngIf="typeDoc === 'document'" class="t-label text-zc-400">El siguiente documento es el que debe firmar:</span>
            <span *ngIf="typeDoc === 'annexes'" class="t-label text-zc-400">Los siguientes archivos son anexos del documento a firmar:</span>
          </div>
          <div *ngIf="typeDoc === 'annexes'">
            <div class="flex-1 flex space-x-2 overflow-x-auto w-full" style="max-width: calc(100vw - 64px)">
              <div *ngIf="!documentsAnnexes.length">
                <div class="bg-zc-50 w-40 border border-zc-200 rounded">
                  <div class="flex items-center space-x-2 p-2">
                    <div class="flex flex-col text-left">
                      <span class="t-label text-zc-black">El documento no cuenta con anexos</span>
                      <span class="t-label text-zc-600">SIN ANEXOS</span>
                    </div>
                  </div>
                </div>
              </div>
              <div *ngIf="documentsAnnexes.length">
                <ng-container *ngFor="let annexe of documentsAnnexes; let position = index">
                  <button (click)="showAnnexe = annexe" class="bg-red-50 w-40 border {{position === indexAnnexeSelected ? 'border-red-500':'border-red-50 hover:border hover:border-red-500'}} rounded">
                    <div class="flex items-center space-x-2 p-2">
                      <div>
                        <svg class="fill-current fill-red-500" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M6.5 11C6.22386 11 6 11.2239 6 11.5V13.5C6 13.7761 6.22386 14 6.5 14C6.77614 14 7 13.7761 7 13.5V13.3336H7.3332C7.97761 13.3336 8.5 12.8112 8.5 12.1668C8.5 11.5224 7.97761 11 7.3332 11H6.5ZM7.3332 12.3336H7V12H7.3332C7.42532 12 7.5 12.0747 7.5 12.1668C7.5 12.2589 7.42532 12.3336 7.3332 12.3336ZM12.0007 11.4994C12.0011 11.2235 12.2248 11 12.5007 11H13.499C13.7752 11 13.999 11.2239 13.999 11.5C13.999 11.7761 13.7752 12 13.499 12H13.0001L12.9997 12.3345H13.499C13.7752 12.3345 13.999 12.5583 13.999 12.8345C13.999 13.1106 13.7752 13.3345 13.499 13.3345H13.0003L13.0007 13.4987C13.0014 13.7749 12.7781 13.9993 12.502 14C12.2258 14.0007 12.0014 13.7774 12.0007 13.5013L11.999 12.8339L12.0007 11.4994ZM9.49854 11C9.22239 11 8.99854 11.2239 8.99854 11.5V13.5C8.99854 13.7761 9.22239 14 9.49854 14H9.99998C10.8284 14 11.5 13.3284 11.5 12.5C11.5 11.6716 10.8284 11 9.99998 11H9.49854ZM9.99854 13V12H9.99998C10.2761 12 10.5 12.2239 10.5 12.5C10.5 12.7761 10.2761 13 9.99998 13H9.99854ZM10 6.5V2H5.5C4.67157 2 4 2.67157 4 3.5V9.08172C3.41817 9.28805 3.00146 9.84329 3.00146 10.4958V14.499C3.00146 15.1516 3.41817 15.7068 4 15.9132V16.5C4 17.3284 4.67157 18 5.5 18H14.5C15.3284 18 16 17.3284 16 16.5V15.9133C16.582 15.707 16.9988 15.1517 16.9988 14.499V10.4958C16.9988 9.84319 16.582 9.28789 16 9.08163V8H11.5C10.6716 8 10 7.32843 10 6.5ZM4.50146 9.99585H15.4988C15.7749 9.99585 15.9988 10.2197 15.9988 10.4958V14.499C15.9988 14.7752 15.7749 14.999 15.4988 14.999H4.50147C4.22532 14.999 4.00146 14.7752 4.00146 14.499V10.4958C4.00146 10.2197 4.22532 9.99585 4.50146 9.99585ZM11 6.5V2.25L15.75 7H11.5C11.2239 7 11 6.77614 11 6.5Z"/>
                        </svg>
                      </div>
                      <div class="flex flex-col text-left">
                        <span class="t-label text-zc-black">{{annexe.name_document}}</span>
                        <span class="t-label text-zc-600 uppercase">{{annexe.type}}</span>
                      </div>
                    </div>
                  </button>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
        <div class="h-full space-y-4 overflow-y-auto bg-zc-200 flex justify-center py-4 rounded-lg pb-16">
          <ng-container *ngIf="typeDoc === 'document'">
            <app-pdf-viewer></app-pdf-viewer>
          </ng-container>
          <ng-container *ngIf="typeDoc === 'annexes' && documentsAnnexes.length">
            <ng-template [ngIf]="this.showAnnexe.type === 'PDF'" [ngIfElse]="img">
              <app-pdf-viewer [src]="showAnnexe.encoding"></app-pdf-viewer>
            </ng-template>
            <ng-template #img>
              <img [src]="'data:' + getMimeTypeofB64(showAnnexe.encoding) + ';base64,' + showAnnexe.encoding" [alt]="showAnnexe.name_document">
            </ng-template>
          </ng-container>
        </div>
        <button class="b-nav-only absolute left-1/2 -translate-x-2/4 bottom-4" (click)="nextPage.emit('sign-user')">Siguiente</button>
      </div>
    </div>
  </div>
</div>
<app-block-page [show]="blockPage"></app-block-page>
